<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/examples/rtk-supabase/rtkSupabaseDemo.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/examples/rtk-supabase/rtkSupabaseDemo.ts" />
              <option name="updatedContent" value="# @ts-nocheck&#10;/* eslint-disable */&#10;// Example: RTK Query endpoint that makes multiple sequential Supabase calls&#10;// - First: count rows in a table&#10;// - Second: pick a random row by offset&#10;//&#10;// This is a standalone demo for reference; adapt naming/paths to your app.&#10;&#10;import { createApi, fakeBaseQuery } from &quot;@reduxjs/toolkit/query/react&quot;;&#10;import { supabase } from &quot;@/lib/supabase&quot;; // or import your client from the correct path&#10;&#10;export type DemoRow = {&#10;  id: string;&#10;  word: string;&#10;};&#10;&#10;type DemoError = { message: string; code?: string };&#10;&#10;export const demoApi = createApi({&#10;  reducerPath: &quot;demoApi&quot;,&#10;  baseQuery: fakeBaseQuery&lt;DemoError&gt;(),&#10;  endpoints: (builder) =&gt; ({&#10;    getRandomRow: builder.query&lt;DemoRow | null, { table?: string } | void&gt;({&#10;      async queryFn(arg) {&#10;        try {&#10;          const table = arg?.table ?? &quot;vocab&quot;;&#10;&#10;          // 1) Count rows&#10;          const { count, error: countError } = await supabase&#10;            .from(table)&#10;            .select(&quot;*&quot;, { count: &quot;exact&quot;, head: true });&#10;          if (countError || !count || count === 0) {&#10;            return {&#10;              error: {&#10;                message: countError?.message || `No rows in table ${table}`,&#10;                code: countError?.code ?? &quot;COUNT_ERROR&quot;,&#10;              },&#10;            };&#10;          }&#10;&#10;          // 2) Choose random offset and fetch exactly 1 row&#10;          const randomOffset = Math.floor(Math.random() * count);&#10;          const { data, error } = await supabase&#10;            .from(table)&#10;            .select(&quot;*&quot;)&#10;            .range(randomOffset, randomOffset)&#10;            .limit(1);&#10;          if (error) {&#10;            return { error: { message: error.message, code: error.code } };&#10;          }&#10;&#10;          return { data: data?.[0] ?? null };&#10;        } catch (e: any) {&#10;          return { error: { message: e?.message ?? &quot;Unknown&quot;, code: &quot;UNKNOWN&quot; } };&#10;        }&#10;      },&#10;    }),&#10;  }),&#10;});&#10;&#10;export const { useGetRandomRowQuery } = demoApi;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>